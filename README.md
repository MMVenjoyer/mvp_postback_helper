# Keitaro Postback Service v2.1.0

Ğ¡ĞµÑ€Ğ²Ğ¸Ñ Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ğ±Ğ¾Ñ‚ĞºĞ¸ Ğ¿Ğ¾ÑÑ‚Ğ±ÑĞºĞ¾Ğ² Ğ¾Ñ‚ Ğ²Ğ½ĞµÑˆĞ½Ğ¸Ñ… ÑĞ¸ÑÑ‚ĞµĞ¼ (Chatterfry, MVP Ğ¸ Ğ´Ñ€.) Ñ Ğ¸Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸ĞµĞ¹ Ğ² Keitaro.

## ğŸ“‹ Ğ¡Ğ¾Ğ´ĞµÑ€Ğ¶Ğ°Ğ½Ğ¸Ğµ

- [ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°](#Ğ°Ñ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°)
- [API Endpoints](#api-endpoints)
- [ĞœĞ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² Ğ¸ Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ‘Ğ”](#Ğ¼Ğ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³-Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ²-Ğ¸-Ğ¿Ğ¾Ğ»ĞµĞ¹-Ğ±Ğ´)
- [Ğ˜Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹](#Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹-Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹)
- [ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…](#Ğ¿Ğ¾Ñ‚Ğ¾ĞºĞ¸-Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…)
- [Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞº](#ÑƒÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ°-Ğ¸-Ğ·Ğ°Ğ¿ÑƒÑĞº)
- [Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ² Ğ²ĞµÑ€ÑĞ¸Ğ¸ 2.1.0](#Ğ¸Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ-Ğ²-Ğ²ĞµÑ€ÑĞ¸Ğ¸-210)

---

## ğŸ—ï¸ ĞÑ€Ñ…Ğ¸Ñ‚ĞµĞºÑ‚ÑƒÑ€Ğ°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”     â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚   Chatterfry    â”‚â”€â”€â”€â”€â–¶â”‚  Postback API    â”‚â”€â”€â”€â”€â–¶â”‚  PostgreSQL â”‚
â”‚   MVP Platform  â”‚     â”‚  (FastAPI)       â”‚     â”‚  (users,    â”‚
â”‚   Other Sources â”‚     â”‚                  â”‚     â”‚  transactions)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚
                                 â–¼
                        â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
                        â”‚    Keitaro     â”‚
                        â”‚  (Postbacks)   â”‚
                        â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ”Œ API Endpoints

### Postback Endpoints

| Endpoint | ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|-------|----------|
| `/postback/ftm` | GET | First Time Message - Ğ¿ĞµÑ€Ğ²Ğ¾Ğµ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |
| `/postback/reg` | GET | Registration - Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ñ Ğ½Ğ° Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ğµ |
| `/postback/dep` | GET | Deposit - Ğ¿ĞµÑ€Ğ²Ñ‹Ğ¹ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚ (SALE Ğ² Keitaro) |
| `/postback/redep` | GET | Redeposit - Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚ (DEP Ğ² Keitaro) |

### Ğ’ÑĞ¿Ğ¾Ğ¼Ğ¾Ğ³Ğ°Ñ‚ĞµĞ»ÑŒĞ½Ñ‹Ğµ Endpoints

| Endpoint | ĞœĞµÑ‚Ğ¾Ğ´ | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|----------|-------|----------|
| `/postback/test/{user_id}` | GET | Ğ¢ĞµÑÑ‚Ğ¾Ğ²Ñ‹Ğ¹ Ğ¿Ñ€Ğ¾ÑĞ¼Ğ¾Ñ‚Ñ€ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ… Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |
| `/postback/stats` | GET | Ğ¡Ñ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºĞ° Ğ¿Ğ¾ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸ÑĞ¼ |
| `/postback/user/{user_id}/history` | GET | Ğ˜ÑÑ‚Ğ¾Ñ€Ğ¸Ñ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ |
| `/postback/lookup` | GET | ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ğ¾ id Ğ¸Ğ»Ğ¸ subscriber_id |

---

## ğŸ—ºï¸ ĞœĞ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ğ¾Ğ² Ğ¸ Ğ¿Ğ¾Ğ»ĞµĞ¹ Ğ‘Ğ”

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° `users`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                              Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ users                                       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ĞŸĞ¾Ğ»Ğµ Ğ² Ğ‘Ğ”           â”‚ ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ API       â”‚ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                  â”‚ id, {chatId}       â”‚ Telegram User ID (PRIMARY KEY)       â”‚
â”‚ subscriber_id       â”‚ subscriber_id      â”‚ UUID Ğ¾Ñ‚ MVP (Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚.)  â”‚
â”‚ trader_id           â”‚ trader_id          â”‚ ID Ñ‚Ñ€ĞµĞ¹Ğ´ĞµÑ€Ğ° Ğ¸Ğ· MVP Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹         â”‚
â”‚ clickid_chatterfry  â”‚ clickid            â”‚ Click ID Ğ¸Ğ· Ñ‚Ñ€ĞµĞºĞµÑ€Ğ° Chatterfry       â”‚
â”‚ sub_3               â”‚ -                  â”‚ Sub ID Ğ´Ğ»Ñ Keitaro (Ğ¸Ğ· Ğ±Ğ¾Ñ‚Ğ°)         â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ftm_time            â”‚ -                  â”‚ Ğ’Ñ€ĞµĞ¼Ñ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ ÑĞ¾Ğ¾Ğ±Ñ‰ĞµĞ½Ğ¸Ñ              â”‚
â”‚ reg                 â”‚ -                  â”‚ Ğ¤Ğ»Ğ°Ğ³ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸ (BOOLEAN)           â”‚
â”‚ reg_time            â”‚ -                  â”‚ Ğ’Ñ€ĞµĞ¼Ñ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸                    â”‚
â”‚ dep                 â”‚ -                  â”‚ Ğ¤Ğ»Ğ°Ğ³ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ° (BOOLEAN)      â”‚
â”‚ dep_time            â”‚ -                  â”‚ Ğ’Ñ€ĞµĞ¼Ñ Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ°               â”‚
â”‚ dep_sum             â”‚ sum                â”‚ Ğ¡ÑƒĞ¼Ğ¼Ğ° Ğ¿ĞµÑ€Ğ²Ğ¾Ğ³Ğ¾ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ°               â”‚
â”‚ redep               â”‚ -                  â”‚ Ğ¤Ğ»Ğ°Ğ³ Ñ€ĞµĞ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ° (BOOLEAN)            â”‚
â”‚ redep_time          â”‚ -                  â”‚ Ğ’Ñ€ĞµĞ¼Ñ Ñ€ĞµĞ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ°                     â”‚
â”‚ redep_sum           â”‚ sum                â”‚ Ğ¡ÑƒĞ¼Ğ¼Ğ° Ñ€ĞµĞ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ°                     â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ company             â”‚ -                  â”‚ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ¸Ğ· Keitaro         â”‚
â”‚ company_id          â”‚ -                  â”‚ ID ĞºĞ°Ğ¼Ğ¿Ğ°Ğ½Ğ¸Ğ¸ Ğ¸Ğ· Keitaro               â”‚
â”‚ landing             â”‚ -                  â”‚ ĞĞ°Ğ·Ğ²Ğ°Ğ½Ğ¸Ğµ Ğ»ĞµĞ½Ğ´Ğ¸Ğ½Ğ³Ğ° Ğ¸Ğ· Keitaro         â”‚
â”‚ landing_id          â”‚ -                  â”‚ ID Ğ»ĞµĞ½Ğ´Ğ¸Ğ½Ğ³Ğ° Ğ¸Ğ· Keitaro               â”‚
â”‚ country             â”‚ -                  â”‚ Ğ¡Ñ‚Ñ€Ğ°Ğ½Ğ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¸Ğ· Keitaro       â”‚
â”‚ created_at          â”‚ -                  â”‚ Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ğ·Ğ°Ğ¿Ğ¸ÑĞ¸                 â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### Ğ¢Ğ°Ğ±Ğ»Ğ¸Ñ†Ğ° `transactions`

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                           Ğ¢ĞĞ‘Ğ›Ğ˜Ğ¦Ğ transactions                                   â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ ĞŸĞ¾Ğ»Ğµ Ğ² Ğ‘Ğ”           â”‚ Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº           â”‚ ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id                  â”‚ AUTO               â”‚ ID Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸ (PRIMARY KEY)          â”‚
â”‚ user_id             â”‚ id Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€        â”‚ Telegram User ID                     â”‚
â”‚ action              â”‚ endpoint           â”‚ ftm / reg / dep / redep              â”‚
â”‚ sum                 â”‚ sum Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€       â”‚ Ğ¡ÑƒĞ¼Ğ¼Ğ° (Ğ´Ğ»Ñ dep/redep)                â”‚
â”‚ raw_data            â”‚ Ğ²ÑĞµ Ğ¿Ğ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€Ñ‹      â”‚ JSON Ñ Ğ¿Ğ¾Ğ»Ğ½Ñ‹Ğ¼Ğ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ğ¼Ğ¸ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ°       â”‚
â”‚ created_at          â”‚ AUTO               â”‚ Ğ”Ğ°Ñ‚Ğ° ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ñ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ğ¸             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## ğŸ†” Ğ˜Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñ‹ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹

### Ğ¡Ñ…ĞµĞ¼Ğ° Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ²

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                        Ğ˜Ğ”Ğ•ĞĞ¢Ğ˜Ğ¤Ğ˜ĞšĞĞ¢ĞĞ Ğ« ĞŸĞĞ›Ğ¬Ğ—ĞĞ’ĞĞ¢Ğ•Ğ›Ğ¯                              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ Ğ˜Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€       â”‚ Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚              â”‚ Ğ˜ÑÑ‚Ğ¾Ñ‡Ğ½Ğ¸Ğº / ĞĞ°Ğ·Ğ½Ğ°Ñ‡ĞµĞ½Ğ¸Ğµ               â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ id (chatId)         â”‚ 123456789           â”‚ Telegram User ID - Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ĞºĞ»ÑÑ‡    â”‚
â”‚                     â”‚ (Ñ‡Ğ¸ÑĞ»Ğ¾Ğ²Ğ¾Ğ¹)          â”‚ ĞŸÑ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ²Ğ¾ Ğ²ÑĞµÑ… Ğ¿Ğ¾ÑÑ‚Ğ±ÑĞºĞ°Ñ…          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ subscriber_id       â”‚ UUID v4             â”‚ ID Ğ¸Ğ· ÑÑ‚Ğ°Ñ€Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ñ‹ MVP            â”‚
â”‚                     â”‚ 1cd38701-7e6e-...   â”‚ Ğ”Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸          â”‚
â”‚                     â”‚                     â”‚ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ² dep/redep            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ trader_id           â”‚ TRD_12345           â”‚ ID Ñ‚Ñ€ĞµĞ¹Ğ´ĞµÑ€Ğ° Ğ¸Ğ· MVP Ğ¿Ğ»Ğ°Ñ‚Ñ„Ğ¾Ñ€Ğ¼Ñ‹        â”‚
â”‚                     â”‚ (ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ²Ğ¾Ğ¹)         â”‚ ĞŸÑ€Ğ¸Ñ…Ğ¾Ğ´Ğ¸Ñ‚ Ğ¿Ñ€Ğ¸ Ñ€ĞµĞ³Ğ¸ÑÑ‚Ñ€Ğ°Ñ†Ğ¸Ğ¸            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ clickid_chatterfry  â”‚ abc123xyz           â”‚ Click ID Ğ¸Ğ· Ñ‚Ñ€ĞµĞºĞµÑ€Ğ° Chatterfry      â”‚
â”‚                     â”‚ (ÑÑ‚Ñ€Ğ¾ĞºĞ¾Ğ²Ğ¾Ğ¹)         â”‚ {tracker.clickid} Ğ² Ğ¿Ğ¾ÑÑ‚Ğ±ÑĞºĞ°Ñ…       â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ sub_3 (subid)       â”‚ 3tse38v.5c.507c     â”‚ Sub ID Ğ´Ğ»Ñ Keitaro                  â”‚
â”‚                     â”‚ (Keitaro format)    â”‚ Ğ—Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ğ±Ğ¾Ñ‚Ğ¾Ğ¼ Ğ¿Ñ€Ğ¸ ÑÑ‚Ğ°Ñ€Ñ‚Ğµ       â”‚
â”‚                     â”‚                     â”‚ Ğ˜ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ Ğ´Ğ»Ñ Ğ¿Ğ¾ÑÑ‚Ğ±ÑĞºĞ¾Ğ² Ğ² Keitaroâ”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ĞŸÑ€Ğ¸Ğ¾Ñ€Ğ¸Ñ‚ĞµÑ‚ Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

1. **ĞŸĞ¾ `id`** (Telegram User ID) - Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ ÑĞ¿Ğ¾ÑĞ¾Ğ±
2. **ĞŸĞ¾ `subscriber_id`** (UUID) - Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸ ÑĞ¾ ÑÑ‚Ğ°Ñ€Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¾Ğ¹

```python
# Ğ›Ğ¾Ğ³Ğ¸ĞºĞ° Ğ¿Ğ¾Ğ¸ÑĞºĞ° Ğ² dep/redep:
user = find_by_telegram_id(id)
if not user and subscriber_id:
    user = find_by_subscriber_id(subscriber_id)
if not user and id:
    user = create_new_user(id)
```

---

## ğŸ“Š ĞŸĞ¾Ñ‚Ğ¾ĞºĞ¸ Ğ´Ğ°Ğ½Ğ½Ñ‹Ñ…

### FTM Postback

```
POST /postback/ftm?id=123456&clickid=abc123

1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚
2. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ clickid_chatterfry (ĞµÑĞ»Ğ¸ Ğ¿ÑƒÑÑ‚Ğ¾Ğ¹)
3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚ (30 ÑĞµĞº Ğ¾ĞºĞ½Ğ¾)
4. Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ (action=ftm)
5. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ ftm_time Ğ² users
6. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑÑ‚Ğ±ÑĞº Ğ² Keitaro (tid=4, status=ftm)
```

### REG Postback

```
POST /postback/reg?id=123456&trader_id=TRD_123&clickid=abc123

1. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ ĞµÑĞ»Ğ¸ Ğ½Ğµ ÑÑƒÑ‰ĞµÑÑ‚Ğ²ÑƒĞµÑ‚
2. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ trader_id Ğ¸ clickid_chatterfry
3. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚ (30 ÑĞµĞº Ğ¾ĞºĞ½Ğ¾)
4. Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ (action=reg)
5. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ reg=TRUE, reg_time Ğ² users
6. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑÑ‚Ğ±ÑĞº Ğ² Keitaro (tid=5, status=reg)
```

### DEP Postback

```
POST /postback/dep?id=123456&sum=100&clickid=abc123
     Ğ¸Ğ»Ğ¸
POST /postback/dep?subscriber_id=uuid-xxx&sum=100

1. ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ğ¾ id Ğ˜Ğ›Ğ˜ subscriber_id
2. Ğ¡Ğ¾Ğ·Ğ´Ğ°Ñ‚ÑŒ ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ (Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ ĞµÑÑ‚ÑŒ id)
3. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ clickid_chatterfry
4. ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ½Ğ° Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚ (60 ÑĞµĞº Ğ¾ĞºĞ½Ğ¾)
5. ĞŸĞ¾ÑÑ‡Ğ¸Ñ‚Ğ°Ñ‚ÑŒ tid = 6 + ĞºĞ¾Ğ»Ğ¸Ñ‡ĞµÑÑ‚Ğ²Ğ¾ Ğ¿Ñ€ĞµĞ´Ñ‹Ğ´ÑƒÑ‰Ğ¸Ñ… Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ğ²
6. Ğ—Ğ°Ğ¿Ğ¸ÑĞ°Ñ‚ÑŒ Ñ‚Ñ€Ğ°Ğ½Ğ·Ğ°ĞºÑ†Ğ¸Ñ (action=dep, sum)
7. ĞĞ±Ğ½Ğ¾Ğ²Ğ¸Ñ‚ÑŒ dep=TRUE, dep_time, dep_sum Ğ² users
8. ĞÑ‚Ğ¿Ñ€Ğ°Ğ²Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾ÑÑ‚Ğ±ÑĞº Ğ² Keitaro (status=sale, payout, tid)
```

### REDEP Postback

```
POST /postback/redep?id=123456&sum=200&clickid=abc123

ĞĞ½Ğ°Ğ»Ğ¾Ğ³Ğ¸Ñ‡Ğ½Ğ¾ DEP, Ğ½Ğ¾:
- action=redep
- status=dep Ğ² Keitaro (Ğ½Ğµ sale!)
- ĞĞ±Ğ½Ğ¾Ğ²Ğ»ÑĞµÑ‚ redep=TRUE, redep_time, redep_sum
```

---

## ğŸ”— Ğ˜Ğ½Ñ‚ĞµĞ³Ñ€Ğ°Ñ†Ğ¸Ñ Ñ Keitaro

### ĞœĞ°Ğ¿Ğ¿Ğ¸Ğ½Ğ³ ÑĞ¾Ğ±Ñ‹Ñ‚Ğ¸Ğ¹

| ĞĞ°Ñˆ action | Keitaro status | Keitaro tid | ĞĞ¿Ğ¸ÑĞ°Ğ½Ğ¸Ğµ |
|------------|----------------|-------------|----------|
| ftm | ftm | 4 | First Time Message |
| reg | reg | 5 | Registration |
| dep | **sale** | 6+ | ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚ |
| redep | **dep** | 6+ | ĞŸĞ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğ¹ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚ |

### Ğ¤Ğ¾Ñ€Ğ¼Ğ°Ñ‚ Ğ¿Ğ¾ÑÑ‚Ğ±ÑĞºĞ° Ğ² Keitaro

```
https://ytgtech.com/e87f58c/postback?subid={sub_3}&status={status}&payout={sum}&tid={tid}
```

### Ğ Ğ°ÑÑ‡ĞµÑ‚ TID Ğ´Ğ»Ñ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚Ğ¾Ğ²

```python
tid = 6 + count(previous_deposits)

# ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹:
# ĞŸĞµÑ€Ğ²Ñ‹Ğ¹ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚: tid = 6 + 0 = 6
# Ğ’Ñ‚Ğ¾Ñ€Ğ¾Ğ¹ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚: tid = 6 + 1 = 7
# Ğ¢Ñ€ĞµÑ‚Ğ¸Ğ¹ Ğ´ĞµĞ¿Ğ¾Ğ·Ğ¸Ñ‚: tid = 6 + 2 = 8
```

---

## ğŸ’¾ ĞŸÑ€Ğ¸Ğ¼ĞµÑ€Ñ‹ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑĞ¾Ğ²

### FTM
```bash
curl "https://tylerwhite.icu/postback/ftm?id=123456789"
curl "https://tylerwhite.icu/postback/ftm?id=123456789&clickid=tracker_click_123"
```

### REG
```bash
curl "https://tylerwhite.icu/postback/reg?id=123456789&trader_id=TRD_98765"
curl "https://tylerwhite.icu/postback/reg?id=123456789&trader_id=TRD_98765&clickid=abc123"
```

### DEP (Ñ id)
```bash
curl "https://tylerwhite.icu/postback/dep?id=123456789&sum=100.50"
curl "https://tylerwhite.icu/postback/dep?id=123456789&sum=100.50&clickid=abc123"
```

### DEP (Ñ subscriber_id Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸)
```bash
curl "https://tylerwhite.icu/postback/dep?subscriber_id=1cd38701-7e6e-4ce7-8161-9ce3011a0cfb&sum=100"
```

### REDEP
```bash
curl "https://tylerwhite.icu/postback/redep?id=123456789&sum=250.00"
curl "https://tylerwhite.icu/postback/redep?subscriber_id=uuid-xxx&sum=250&clickid=xyz789"
```

### ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ
```bash
curl "https://tylerwhite.icu/postback/lookup?id=123456789"
curl "https://tylerwhite.icu/postback/lookup?subscriber_id=1cd38701-7e6e-4ce7-8161-9ce3011a0cfb"
```

---

## ğŸ› ï¸ Ğ£ÑÑ‚Ğ°Ğ½Ğ¾Ğ²ĞºĞ° Ğ¸ Ğ·Ğ°Ğ¿ÑƒÑĞº

### 1. ĞŸÑ€Ğ¸Ğ¼ĞµĞ½Ğ¸Ñ‚ÑŒ Ğ¼Ğ¸Ğ³Ñ€Ğ°Ñ†Ğ¸Ñ Ğ‘Ğ”

```bash
psql -U postgres -d your_db -f migrations/001_add_clickid_chatterfry.sql
```

### 2. ĞĞ°ÑÑ‚Ñ€Ğ¾Ğ¸Ñ‚ÑŒ .env

```env
DB_HOST=localhost
DB_PORT=5432
DB_USER=postgres
DB_PASSWORD=your_password
DB_NAME=your_db

KEITARO_DOMAIN=https://your-keitaro.com
KEITARO_ADMIN_API_KEY=your_api_key
KEITARO_POSTBACK_URL=https://ytgtech.com/e87f58c/postback

BOT_TOKEN=your_telegram_bot_token
CHAT_ID=your_chat_id
ENABLE_TELEGRAM_LOGS=true
```

### 3. Ğ—Ğ°Ğ¿ÑƒÑÑ‚Ğ¸Ñ‚ÑŒ

```bash
pip install -r requirements.txt
python main.py
# Ğ¸Ğ»Ğ¸ Ñ‡ĞµÑ€ĞµĞ· PM2:
./start.sh
```

---

## ğŸ“ Ğ˜Ğ·Ğ¼ĞµĞ½ĞµĞ½Ğ¸Ñ Ğ² Ğ²ĞµÑ€ÑĞ¸Ğ¸ 2.1.0

### ĞĞ¾Ğ²Ñ‹Ğµ Ñ„ÑƒĞ½ĞºÑ†Ğ¸Ğ¸

1. **ĞĞ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¾Ğµ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğµ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹**
   - Ğ•ÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ÑŒ Ğ½Ğµ Ğ½Ğ°Ğ¹Ğ´ĞµĞ½ Ğ² Ğ‘Ğ” - ÑĞ¾Ğ·Ğ´Ğ°ĞµÑ‚ÑÑ Ğ°Ğ²Ñ‚Ğ¾Ğ¼Ğ°Ñ‚Ğ¸Ñ‡ĞµÑĞºĞ¸
   - Ğ‘Ğ¾Ğ»ÑŒÑˆĞµ Ğ½Ğµ Ñ‚ĞµÑ€ÑĞµĞ¼ Ğ¿Ğ¾ÑÑ‚Ğ±ÑĞºĞ¸ Ğ¸Ğ·-Ğ·Ğ° Ğ¾Ñ‚ÑÑƒÑ‚ÑÑ‚Ğ²Ğ¸Ñ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

2. **ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° clickid Ğ¸Ğ· Chatterfry**
   - ĞĞ¾Ğ²Ğ¾Ğµ Ğ¿Ğ¾Ğ»Ğµ `clickid_chatterfry` Ğ² Ñ‚Ğ°Ğ±Ğ»Ğ¸Ñ†Ğµ users
   - ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ `clickid` Ğ²Ğ¾ Ğ²ÑĞµÑ… Ğ¿Ğ¾ÑÑ‚Ğ±ÑĞºĞ°Ñ…
   - Ğ—Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ ĞµÑĞ»Ğ¸ Ğ¿Ğ¾Ğ»Ğµ Ğ¿ÑƒÑÑ‚Ğ¾Ğµ (Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚)

3. **ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾ subscriber_id Ğ´Ğ»Ñ dep/redep**
   - ĞĞ±Ñ€Ğ°Ñ‚Ğ½Ğ°Ñ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚ÑŒ ÑĞ¾ ÑÑ‚Ğ°Ñ€Ğ¾Ğ¹ ÑĞ¸ÑÑ‚ĞµĞ¼Ğ¾Ğ¹
   - ĞŸĞ¾Ğ¸ÑĞº ÑĞ½Ğ°Ñ‡Ğ°Ğ»Ğ° Ğ¿Ğ¾ id, Ğ·Ğ°Ñ‚ĞµĞ¼ Ğ¿Ğ¾ subscriber_id
   - ĞŸĞ¾Ğ´Ğ´ĞµÑ€Ğ¶ĞºĞ° Ğ¾Ğ±Ğ¾Ğ¸Ñ… Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ğ¾Ğ² Ğ¾Ğ´Ğ½Ğ¾Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾

4. **Ğ—Ğ°Ñ‰Ğ¸Ñ‚Ğ° Ğ¾Ñ‚ Ğ´ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ğ¾Ğ²**
   - ĞŸÑ€Ğ¾Ğ²ĞµÑ€ĞºĞ° Ğ½Ğ° Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ² Ğ²Ñ€ĞµĞ¼ĞµĞ½Ğ½Ğ¾Ğ¼ Ğ¾ĞºĞ½Ğµ
   - FTM/REG: 30 ÑĞµĞºÑƒĞ½Ğ´
   - DEP/REDEP: 60 ÑĞµĞºÑƒĞ½Ğ´

### Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ¸Ñ

1. **Singleton Ğ´Ğ»Ñ DataBase**
   - ĞĞ´Ğ¸Ğ½ connection pool Ğ½Ğ° Ğ²ÑÑ‘ Ğ¿Ñ€Ğ¸Ğ»Ğ¾Ğ¶ĞµĞ½Ğ¸Ğµ
   - Ğ˜ÑĞ¿Ñ€Ğ°Ğ²Ğ»ĞµĞ½Ğ° ÑƒÑ‚ĞµÑ‡ĞºĞ° ÑĞ¾ĞµĞ´Ğ¸Ğ½ĞµĞ½Ğ¸Ğ¹

2. **Ğ£Ğ»ÑƒÑ‡ÑˆĞµĞ½Ğ½Ğ¾Ğµ Ğ»Ğ¾Ğ³Ğ¸Ñ€Ğ¾Ğ²Ğ°Ğ½Ğ¸Ğµ**
   - ĞŸĞ¾Ğ´Ñ€Ğ¾Ğ±Ğ½Ñ‹Ğµ Ğ»Ğ¾Ğ³Ğ¸ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸
   - Ğ˜Ğ½Ñ„Ğ¾Ñ€Ğ¼Ğ°Ñ†Ğ¸Ñ Ğ¾ ÑĞ¾Ğ·Ğ´Ğ°Ğ½Ğ¸Ğ¸ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»ĞµĞ¹

3. **ĞĞ¾Ğ²Ñ‹Ğ¹ endpoint /postback/lookup**
   - ĞŸĞ¾Ğ¸ÑĞº Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ Ğ¿Ğ¾ Ğ»ÑĞ±Ğ¾Ğ¼Ñƒ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€Ñƒ
   - ĞŸĞ¾Ğ»ĞµĞ·Ğ½Ğ¾ Ğ´Ğ»Ñ Ğ¾Ñ‚Ğ»Ğ°Ğ´ĞºĞ¸

---

## ğŸ” Ğ”Ğ¸Ğ°Ğ³Ğ½Ğ¾ÑÑ‚Ğ¸ĞºĞ°

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ¿Ğ¾Ğ»ÑŒĞ·Ğ¾Ğ²Ğ°Ñ‚ĞµĞ»Ñ

```bash
curl "https://tylerwhite.icu/postback/test/123456789"
```

### ĞĞ°Ğ¹Ñ‚Ğ¸ Ğ¿Ğ¾ subscriber_id

```bash
curl "https://tylerwhite.icu/postback/lookup?subscriber_id=1cd38701-7e6e-4ce7-8161-9ce3011a0cfb"
```

### ĞŸĞ¾ÑĞ¼Ğ¾Ñ‚Ñ€ĞµÑ‚ÑŒ ÑÑ‚Ğ°Ñ‚Ğ¸ÑÑ‚Ğ¸ĞºÑƒ

```bash
curl "https://tylerwhite.icu/postback/stats"
```

### ĞŸÑ€Ğ¾Ğ²ĞµÑ€Ğ¸Ñ‚ÑŒ Ğ·Ğ´Ğ¾Ñ€Ğ¾Ğ²ÑŒĞµ ÑĞµÑ€Ğ²Ğ¸ÑĞ°

```bash
curl "https://tylerwhite.icu/health"
```

---

## âš ï¸ Ğ’Ğ°Ğ¶Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¼ĞµÑ‡Ğ°Ğ½Ğ¸Ñ

1. **ĞŸĞ°Ñ€Ğ°Ğ¼ĞµÑ‚Ñ€ sum**: ĞµÑĞ»Ğ¸ Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ´Ğ°Ğ½ Ğ¸Ğ»Ğ¸ Ğ½ĞµĞ²Ğ°Ğ»Ğ¸Ğ´Ğ½Ñ‹Ğ¹ - Ğ¸ÑĞ¿Ğ¾Ğ»ÑŒĞ·ÑƒĞµÑ‚ÑÑ 59 Ğ¿Ğ¾ ÑƒĞ¼Ğ¾Ğ»Ñ‡Ğ°Ğ½Ğ¸Ñ
2. **subscriber_id**: Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ´Ğ»Ñ Ğ¾Ğ±Ñ€Ğ°Ñ‚Ğ½Ğ¾Ğ¹ ÑĞ¾Ğ²Ğ¼ĞµÑÑ‚Ğ¸Ğ¼Ğ¾ÑÑ‚Ğ¸, Ğ¾ÑĞ½Ğ¾Ğ²Ğ½Ğ¾Ğ¹ Ğ¸Ğ´ĞµĞ½Ñ‚Ğ¸Ñ„Ğ¸ĞºĞ°Ñ‚Ğ¾Ñ€ - `id`
3. **clickid**: Ğ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ Ñ‚Ğ¾Ğ»ÑŒĞºĞ¾ Ğ¾Ğ´Ğ¸Ğ½ Ñ€Ğ°Ğ·, Ğ½Ğµ Ğ¿ĞµÑ€ĞµĞ·Ğ°Ğ¿Ğ¸ÑÑ‹Ğ²Ğ°ĞµÑ‚ÑÑ
4. **Ğ”ÑƒĞ±Ğ»Ğ¸ĞºĞ°Ñ‚Ñ‹**: Ğ¿Ğ¾Ğ²Ñ‚Ğ¾Ñ€Ğ½Ñ‹Ğµ Ğ·Ğ°Ğ¿Ñ€Ğ¾ÑÑ‹ Ğ² ĞºĞ¾Ñ€Ğ¾Ñ‚ĞºĞ¾Ğ¼ Ğ¾ĞºĞ½Ğµ Ğ¸Ğ³Ğ½Ğ¾Ñ€Ğ¸Ñ€ÑƒÑÑ‚ÑÑ
5. **Keitaro**: dep Ğ¾Ñ‚Ğ¿Ñ€Ğ°Ğ²Ğ»ÑĞµÑ‚ÑÑ ĞºĞ°Ğº `sale`, redep ĞºĞ°Ğº `dep`